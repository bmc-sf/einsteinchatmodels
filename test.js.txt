 const express = require('express');
 const axios = require('axios');
 const bodyParser = require('body-parser');
 const app = express();
 const port = 3000;// Middleware to parse JSON bodies

 app.use(bodyParser.json());
 app.use(bodyParser.urlencoded({ extended: true }));

 module.exports = function(app) {
    app.get('/request-token', async (req, res) => {    
        const { my_domain, consumer_key, consumer_secret } = req.body;    
        if (!my_domain || !consumer_key || !consumer_secret) {        
            return res.status(400).send('Missing required parameters');    
        }    
        
        const url = `https://${my_domain}/services/oauth2/token`;    
        const data = `grant_type=client_credentials&client_id=${consumer_key}&client_secret=${consumer_secret}`;    
        try {        
            const response = await axios.post(url, data, {            
                headers: {                
                    'Content-Type': 'application/x-www-form-urlencoded'            
                }        
            });        
            res.status(200).json(response.data);    
        } catch (error) {        
            console.error(error);        
            res.status(500).send('Error requesting token');    
        }});app.listen(port, () => {    
            console.log(`Server running on port ${port}`);
        }
            );
 };